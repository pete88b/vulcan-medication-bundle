---

title: Vulcan Medication Bundle


keywords: fastai
sidebar: home_sidebar

summary: "API to get single patient medication bundles."
description: "API to get single patient medication bundles."
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note: No installation is needed to use the web API but ... if you'd like to use the console commands;</p>
<p><code>pip install vulcan_medication_bundle</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Web-API">Web API<a class="anchor-link" href="#Web-API"> </a></h3><p>We have an Azure app service that can be used to test this API.</p>
<p>The API is available at: <a href="http://vulcan-medication-bundle.azurewebsites.net/single_patient_medication_bundle">http://vulcan-medication-bundle.azurewebsites.net/single_patient_medication_bundle</a> and requires 2 URL parameters;</p>
<ul>
<li><code>api_base</code> base URL for an "open" FHIR server</li>
<li><code>subject</code> ID of a patient that should exist on the specified FHIR server</li>
</ul>
<p>e.g. <a href="http://vulcan-medication-bundle.azurewebsites.net/single_patient_medication_bundle?api_base=http://hapi.fhir.org/baseR4&amp;subject=0c4a1143-8d1c-42ed-b509-eac97d77c9b2">http://vulcan-medication-bundle.azurewebsites.net/single_patient_medication_bundle?api_base=http://hapi.fhir.org/baseR4&amp;subject=0c4a1143-8d1c-42ed-b509-eac97d77c9b2</a> will return a medication bundle for subject <code>0c4a1143-8d1c-42ed-b509-eac97d77c9b2</code> pulled from <code>http://hapi.fhir.org/baseR4</code></p>
<h3 id="Console-commands">Console commands<a class="anchor-link" href="#Console-commands"> </a></h3><p>For help <code>single_patient_medication_bundle -h</code></p>
<p>To save a bundle to the default output folder <code>single_patient_medication_bundle https://demo1.aha.accenture.com/fhir/r4 o5BSD5q-Boc-320775</code></p>

<pre><code>GET https://demo1.aha.accenture.com/fhir/r4/Patient?_id=o5BSD5q-Boc-320775&amp;_format=json
GET https://demo1.aha.accenture.com/fhir/r4/MedicationRequest?subject=Patient/o5BSD5q-Boc-320775&amp;_format=json
GET https://demo1.aha.accenture.com/fhir/r4/MedicationRequest/?subject=Patient/o5BSD5q-Boc-320775&amp;_format=json&amp;$ipp-page-offset=100
...
GET https://demo1.aha.accenture.com/fhir/r4/MedicationDispense?subject=Patient/o5BSD5q-Boc-320775&amp;_format=json
GET https://demo1.aha.accenture.com/fhir/r4/MedicationAdministration?subject=Patient/o5BSD5q-Boc-320775&amp;_format=json
GET https://demo1.aha.accenture.com/fhir/r4/MedicationStatement?subject=Patient/o5BSD5q-Boc-320775&amp;_format=json
GET https://demo1.aha.accenture.com/fhir/r4/Condition?_id=o5BSD5q-Boc-320818&amp;_format=json
...
GET https://demo1.aha.accenture.com/fhir/r4/Condition?_id=o5BSD5q-Boc-320852&amp;_format=json
Removing MedicationRequest with status stopped
...
Removing MedicationRequest with status stopped
Bundle saved to data/patient_medication_bundle_o5BSD5q-Boc-320775.json</code></pre>
<p>To save a bundle to a specific folder <code>vulcan_medication_bundle&gt;single_patient_medication_bundle https://demo1.aha.accenture.com/fhir/r4 o5BSD5q-Boc-320775 --output_path=your_folder</code></p>
<h3 id="Demo-Web-App">Demo Web App<a class="anchor-link" href="#Demo-Web-App"> </a></h3><p>The <a href="http://vulcan-medication-bundle.azurewebsites.net">demo web app</a> might be running ... sorry if it's not.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Developers">Developers<a class="anchor-link" href="#Developers"> </a></h1>
<pre><code>git config --global core.autocrlf input</code></pre>

<pre><code>conda create -n vulcan_medication_bundle python==3.7 -y
conda activate vulcan_medication_bundle
pip install nbdev jupyterlab pandas Flask
cd github *** nav to where you want this project to live on your filesystem
git clone https://github.com/pete88b/vulcan_medication_bundle.git
cd vulcan_medication_bundle
nbdev_install_git_hooks
jupyter-lab</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Running-the-app-locally">Running the app locally<a class="anchor-link" href="#Running-the-app-locally"> </a></h2><p>To run the web API and demo web app (it's just one Flask app)</p>

<pre><code>conda activate vulcan_medication_bundle
SET FLASK_APP=vulcan_medication_bundle.web.app
SET FLASK_ENV=development
flask run</code></pre>
<p>The you can GET <a href="http://127.0.0.1:5000/single_patient_medication_bundle?api_base=http://hapi.fhir.org/baseR4&amp;subject=0c4a1143-8d1c-42ed-b509-eac97d77c9b2">http://127.0.0.1:5000/single_patient_medication_bundle?api_base=http://hapi.fhir.org/baseR4&amp;subject=0c4a1143-8d1c-42ed-b509-eac97d77c9b2</a> etc</p>
<p>You'll need to run <code>nbdev_build_lib</code> if you make any changes to notebooks tagged with <code>#default_exp</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Running-command-line-tools-locally">Running command line tools locally<a class="anchor-link" href="#Running-command-line-tools-locally"> </a></h2><p><code>pip install -e .</code> is the only extra step needed</p>

</div>
</div>
</div>
</div>
 

